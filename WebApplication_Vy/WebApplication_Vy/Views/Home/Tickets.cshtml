@model List<WebApplication_Vy.Models.DTO.CustomerDto>

@{
    ViewBag.Title = "Customers";
}
<script type="text/javascript" src="~/Scripts/View_specific_scripts/tickets.js"></script>

<div class="row">
    <h2 class="display-4">Customers</h2>
</div>

<div class="row pl-1">
    <p>
        @Html.ActionLink("New Ticket", "Index", "Home", null, new { @class = "btn btn-outline-success" })
    </p>
</div>
<div id="table">
    @foreach (var item in Model)
    {
        if (item.Tickets.Count < 1)
        {
            continue;
        }
        <div class="row button-row p-3 border-top mt-2" style="background-color: #DBF0E0;">
            <div class="col font-weight-bold">
                @item.Givenname
            </div>
            <div class="col font-weight-bold">
                @item.Surname
            </div>
            <div class="col font-weight-bold">
                @item.Email
            </div>
        </div>
        <div id="hidden" class="mb-2" style="display:none">
            <table class="table table-striped text-center">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">Dep. Station</th>
                        <th scope="col">Arr. Station</th>
                        <th scope="col">Time</th>
                        <th scope="col">Duration</th>
                        <th scope="col">Price</th>
                        <th scope="col">Credit Card</th>
                        <th scope="col"></th>
                        <th scope="col"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var t in item.Tickets)
                    {
                        <tr>
                            <th class="font-weight-bold">@t.DepartureStation</th>
                            <td class="font-weight-bold">@t.ArrivalStation</td>
                            <td>@t.DepartureTime - @t.ArrivalTime</td>
                            <td>@t.Duration</td>
                            <td>@t.Price</td>
                            <td id="cardNumber">@t.CreditCard.Card_Number</td>
                            <td><button type="button" class="btn btn-outline-danger" data-toggle="modal" id="@t.Id" data-target="#delete">Delete</button></td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
</div>

<div class="modal fade" id="delete" tabindex="-1" role="dialog"  aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Deleting ticket?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Are you sure you want to delete this ticket?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <a id="confirmBtn" href="" class="btn btn-danger">Delete</a>
            </div>
        </div>
    </div>
</div>
